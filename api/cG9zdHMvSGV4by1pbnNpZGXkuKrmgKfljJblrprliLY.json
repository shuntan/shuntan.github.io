{"title":"Hexo + inside 博客个性化定制","date":"2020-04-22T11:24:28.000Z","date_formatted":{"ll":"Apr 22, 2020","L":"04/22/2020","MM-DD":"04-22"},"thumbnail":"/posts/Hexo-inside个性化定制/hexo.png","link":"posts/Hexo-inside个性化定制","comments":true,"updated":"2020-04-22T11:29:22.617Z","content":"<p><a href=\"https://blog.fiteen.top/\" target=\"_blank\">我的博客</a>采用的是 <a href=\"https://hexo.io/themes/\" target=\"_blank\">Hexo 官方网站</a>上相中的 <a href=\"https://github.com/ikeq/hexo-theme-inside\" target=\"_blank\">hexo+theme+inside</a> 主题。虽然开发者已经提供了主题的<a href=\"https://blog.oniuo.com/theme-inside\" target=\"_blank\">使用文档</a>，但是作为一款小众的主题，一些常用功能的定制并不是那么完善，不过贴心的开发者提供了 <a href=\"https://blog.oniuo.com/theme-inside/docs/misc#plugins\" target=\"_blank\">plugins 配置方案</a>。</p>\n<a id=\"more\"></a>\n<p>下文总结了部分功能的拓展方案，可供需要的朋友参考。</p>\n<blockquote>\n<p><strong>注意</strong>：inside v2.6.3 之前会出现<strong>文章中点击上/下一篇时，插件无法生效的情况</strong>。<br>\n其原因是<strong>主题插件模块存在组件缓存问题，导致切换页面时 js 执行失败</strong>，为了保障功能正常使用，请务必将主题升级到<a href=\"https://github.com/ikeq/hexo-theme-inside/releases\" target=\"_blank\">最新版本</a>。（2020.03.14 更新）</p>\n</blockquote>\n<h2 id=\"plugin-前置准备\">plugin 前置准备<a title=\"#plugin-前置准备\" href=\"#plugin-前置准备\"></a></h2>\n<p><code>themes/inside/_config.yml</code> 中的 plugins 支持于特定位置动态插入可执行的代码片段，或全局加载脚本/样式。</p>\n<p>支持通过安装 html-minifier、babel 和 uglify-js 来实现代码压缩。 在项目根目录执行（Hexo 根目录，非 <code>themes/inside</code>）：</p>\n<figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm <span class=\"keyword\">install </span><span class=\"keyword\">babel-core </span><span class=\"keyword\">babel-preset-env </span>html-minifier uglify-<span class=\"keyword\">js </span>--save</span><br></pre></td></tr></table></figure>\n<h2 id=\"font-awesome\">Font Awesome<a title=\"#font-awesome\" href=\"#font-awesome\"></a></h2>\n<p>按照 plugin 配置描述的，要支持 Font Awesome 的 CSS，只需要这样设置：</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_config.ymlplugins:</span><br><span class=\"line\">  - <span class=\"regexp\">//</span>netdna.bootstrapcdn.com<span class=\"regexp\">/font-awesome/</span><span class=\"number\">4.7</span>.<span class=\"number\">0</span><span class=\"regexp\">/css/</span>font-awesome.min.css</span><br></pre></td></tr></table></figure>\n<p>也就是在全局加载样式，<s>不过不知道为什么没有正常生效🤔</s>（<strong><a href=\"https://github.com/ikeq/hexo-theme-inside/releases/tag/2.6.1\" target=\"_blank\">inside-v2.6.1</a> 已经修复了这个问题</strong>，建议你升级到<a href=\"https://github.com/ikeq/hexo-theme-inside/releases\" target=\"_blank\">最新版本</a>）。</p>\n<blockquote>\n<p>如果你是 v2.6.0 及以下版本，可以用这个方案解决：</p>\n<p>在 <code>themes/inside/layout/index.swig</code> 的 `` 标签内加入以下代码：</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">index.swig&lt;link <span class=\"attribute\">href</span>=<span class=\"string\">\"//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\"</span> <span class=\"attribute\">rel</span>=<span class=\"string\">\"stylesheet\"</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>这时，虽然图标显示出来了，但是样式还是有点问题，可能和主题本身的 CSS 有关系，找到 <code>source</code> 目录下的 <code>styles.e4da61f53c7bc99becf4.css</code>（也可能叫别的） 里的 <code>.fa</code>，删除里面的 <code>margin:10rem 0 3rem;</code> 。</p>\n<p><img src=\"https://blog.fiteen.top/2020/hexo-theme-inside-plugin/alter-style-css.png\" alt=\"修改 .fa 样式\" class=\"φcx\"></p>\n</blockquote>\n<p>不过个人觉得放在 CDN 上访问速度还是有点慢，所以从官网<a href=\"http://fontawesome.io/\" target=\"_blank\">下载</a>最新版放在主题的 <code>source/lib</code> 目录下，全局引用：</p>\n<figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_config.<span class=\"symbol\">ymlplugins:</span></span><br><span class=\"line\">  - <span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">font</span>-<span class=\"title\">awesome</span>/<span class=\"title\">css</span>/<span class=\"title\">font</span>-<span class=\"title\">awesome</span>.<span class=\"title\">min</span>.<span class=\"title\">css</span></span></span><br></pre></td></tr></table></figure>\n<p>或者在需要的位置引用 CSS 资源：</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;link <span class=\"attribute\">href</span>=<span class=\"string\">\"lib/font-awesome/css/font-awesome.min.css\"</span> <span class=\"attribute\">rel</span>=<span class=\"string\">\"stylesheet\"</span>&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"访问量统计\">访问量统计<a title=\"#访问量统计\" href=\"#访问量统计\"></a></h2>\n<p>很多人都有站点访问量统计的需求，像这样：</p>\n<p><img src=\"https://blog.fiteen.top/2020/hexo-theme-inside-plugin/busuanzi-example.png\" alt=\"访问量统计效果\" class=\"φcx\"></p>\n<p>我采用的是轻量的<a href=\"http://ibruce.info/2015/04/04/busuanzi/\" target=\"_blank\">不蒜子统计</a>来做访问量统计。</p>\n<p>先<strong>安装脚本</strong>，在使用不蒜子的页面，也就是 <code>sidebar</code> 模块插入 <code>busuanzi.js</code>。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_config.ymlplugins:</span><br><span class=\"line\">  - position: sidebar</span><br><span class=\"line\">    template: |</span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">async</span> <span class=\"attr\">src</span>=<span class=\"string\">\"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>再<strong>安装标签</strong>，官方给出了站点 PV/UV 的统计代码：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_container_site_pv\"</span>&gt;</span>本站总访问量<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_value_site_pv\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>次<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_container_site_uv\"</span>&gt;</span>本站访客数<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_value_site_uv\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>人次<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>你也可以用这两个 id 来显示访问数：</p>\n<ul>\n<li><code>busuanzi_value_site_pv</code>：异步回填访问数</li>\n<li><code>busuanzi_container_site_pv</code>：为防止计数服务访问出错或超时（3 秒）的情况下，使整个标签自动隐藏显示</li>\n</ul>\n<p>在 <code>_config.yml</code> 文件里找到 <code>footer</code> 下的 <code>custom</code>，写入相关的 html 代码。比如：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_config.yml# Custom text</span><br><span class=\"line\">custom: <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_container_site_uv\"</span> <span class=\"attr\">style</span>=<span class=\"string\">'display:none'</span>&gt;</span>Total <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_value_site_uv\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span> visitors. <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_container_site_pv\"</span> <span class=\"attr\">style</span>=<span class=\"string\">'display:none'</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_value_site_pv\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span> Views<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>或者使用 font-awesome 字体：</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_config.yml# Custom text</span><br><span class=\"line\">custom: &lt;span <span class=\"attribute\">id</span>=<span class=\"string\">\"busuanzi_container_site_pv\"</span> <span class=\"attribute\">style</span>=<span class=\"string\">'display:none'</span>&gt;&lt;i <span class=\"attribute\">class</span>=<span class=\"string\">\"fa fa-eye\"</span>&gt;&lt;/i&gt; &lt;span <span class=\"attribute\">id</span>=<span class=\"string\">\"busuanzi_value_site_pv\"</span>&gt;&lt;/span&gt;&lt;/span&gt; ｜ &lt;span <span class=\"attribute\">id</span>=<span class=\"string\">\"busuanzi_container_site_uv\"</span> <span class=\"attribute\">style</span>=<span class=\"string\">'display:none'</span>&gt;&lt;i <span class=\"attribute\">class</span>=<span class=\"string\">\"fa fa-user\"</span>&gt;&lt;/i&gt; &lt;span <span class=\"attribute\">id</span>=<span class=\"string\">\"busuanzi_value_site_uv\"</span>&gt;&lt;/span&gt;&lt;/span&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"代码复制\">代码复制<a title=\"#代码复制\" href=\"#代码复制\"></a></h2>\n<p>为了方便博客的读者引用代码，可以在文章中代码块的右上角加一个复制按钮，如：</p>\n<p><img src=\"https://blog.fiteen.top/2020/hexo-theme-inside-plugin/clipboard-example.png\" alt=\"代码块复制按钮效果\" class=\"φcx\"></p>\n<p>它的实现是在页面加载完毕后，使用 js 动态为每个代码块添加一个按钮，当鼠标滑动到代码块上时显示按钮，点击按钮时复制代码块里的内容。因此需要三个文件：</p>\n<ul>\n<li><strong>实现复制代码块功能</strong>的文件 <code>clipboard.js</code>，这里可以直接引用这个文件： <code>https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.js</code>。</li>\n<li>支持<strong>动态创建复制按钮</strong>的文件 <code>clipboard-use.js</code></li>\n<li>复制按钮的<strong>样式</strong>文件 <code>clipboard.css</code></li>\n</ul>\n<p>页面载入完成后，创建一个复制按钮，上面用 font-awesome 的 clipboard 图标，实现如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">clipboard-use.js!<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e, t, a</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/* code */</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> initCopyCode = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> copyHtml = <span class=\"string\">'&lt;button class=\"btn-copy\" data-clipboard-snippet=\"\"&gt;&lt;i class=\"fa fa-clipboard\"&gt;&lt;/i&gt;&lt;/button&gt;'</span>;</span><br><span class=\"line\">    $(<span class=\"string\">\".highlight .code pre\"</span>).before(copyHtml);</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ClipboardJS(<span class=\"string\">'.btn-copy'</span>, &#123;</span><br><span class=\"line\">      target: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">trigger</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> trigger.nextElementSibling;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  initCopyCode();</span><br><span class=\"line\">&#125;(<span class=\"built_in\">window</span>, <span class=\"built_in\">document</span>);</span><br></pre></td></tr></table></figure>\n<p>这里要注意的是， <code>clipboard-use.js</code> 中需要用到 <code>jQuery</code>，而 inside 里没有引入，故需要手动引入。</p>\n<p>复制按钮的样式如下：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">clipboard</span><span class=\"selector-class\">.css</span><span class=\"selector-class\">.highlight</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/* 方便 copy 代码按钮（btn-copy）的定位 */</span></span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn-copy</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">3px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-width</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">13px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">2px</span> <span class=\"number\">6px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">right</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: none;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: black;</span><br><span class=\"line\">    <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">outline</span>: none;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-tap-highlight-color</span>: transparent;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-appearance</span>: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn-copy</span> <span class=\"selector-tag\">span</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.highlight</span><span class=\"selector-pseudo\">:hover</span> <span class=\"selector-class\">.btn-copy</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>复制按钮可以按照自己的喜好设置，如果想简单一点，直接用我的样式，可以这样配置：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_config.ymlplugins:</span><br><span class=\"line\">  # inside 主题没有引入 jQuery 框架，需要手动引入</span><br><span class=\"line\">  - //cdnjs.loli.net/ajax/libs/jquery/3.2.1/jquery.min.js</span><br><span class=\"line\">  # 插件生效范围：post 和 page</span><br><span class=\"line\">  - position: [post, page]</span><br><span class=\"line\">    template: |</span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"//cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"//cdn.jsdelivr.net/gh/fiteen/fiteen.github.io@v0.1.0/clipboard-use.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">href</span>=<span class=\"string\">\"//cdn.jsdelivr.net/gh/fiteen/fiteen.github.io@v0.1.1/clipboard.css\"</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">href</span>=<span class=\"string\">\"lib/font-awesome/css/font-awesome.min.css\"</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>如果已经全局引用过 font-awesome，可以把最后一条引用删除。</p>\n<h2 id=\"评论系统---valine\">评论系统 - Valine<a title=\"#评论系统---valine\" href=\"#评论系统---valine\"></a></h2>\n<p>主题的内置评论，支持 <a href=\"https://disqus.com/\" target=\"_blank\">Disqus</a> 和 <a href=\"https://livere.com/\" target=\"_blank\">LiveRe</a>。但个人认为这两款评论系统的 UI 风格主题不是很搭配，最后还是决定采用 <a href=\"https://valine.js.org/\" target=\"_blank\">Valine</a>——一款基于 LeanCloud 的快速、简洁且高效的无后端评论系统。</p>\n<p>虽然文档中也有提供 Valine 的配置方法，但是我实践后发现样式貌似出现了一些问题，这条 <a href=\"https://github.com/ikeq/hexo-theme-inside/issues/153\" target=\"_blank\">issue</a> 也证实了这一点（<strong>inside-2.6.1 已修复</strong>）。所以我另找了一个 js 文件，并做了一点小改动。你可以引用我放在 CDN 上的资源 <code>https://cdn.jsdelivr.net/gh/fiteen/fiteen.github.io@v0.1.0/valine.js</code>，或者直接把 <code>valine.js</code> 文件<a href=\"https://github.com/fiteen/fiteen.github.io/releases\" target=\"_blank\">下载</a>到本地，放在 <code>inside/source/lib</code>路径下。然后写入以下代码：</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_config.ymlplugin<span class=\"variable\">s:</span></span><br><span class=\"line\">  # inside 主题没有引入 jQuery 框架，需要手动引入</span><br><span class=\"line\">  - //cdnjs.loli.net/ajax/libs/jquery/<span class=\"number\">3.2</span>.<span class=\"number\">1</span>/jquery.<span class=\"built_in\">min</span>.js</span><br><span class=\"line\">  - //cdn1.lncld.net/static/js/<span class=\"number\">3.0</span>.<span class=\"number\">4</span>/av-<span class=\"built_in\">min</span>.js</span><br><span class=\"line\">  # 引用本地 <span class=\"keyword\">source</span>/lib 路径下的 valine.js 文件</span><br><span class=\"line\">  # - lib/valine.js</span><br><span class=\"line\">  # 引用 CDN 上的 valine.js 文件</span><br><span class=\"line\">  - //cdn.jsdelivr.net/gh/fiteen/fiteen.github.io@v0.<span class=\"number\">1.0</span>/valine.js</span><br><span class=\"line\">  - position: comments</span><br><span class=\"line\">    template: |</span><br><span class=\"line\">      &lt;div id=<span class=\"string\">\"vcomment\"</span>&gt;&lt;/div&gt;</span><br><span class=\"line\">      <span class=\"symbol\">&lt;script&gt;</span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Valine(&#123;</span><br><span class=\"line\">          <span class=\"keyword\">e</span><span class=\"variable\">l:</span> <span class=\"string\">'#vcomment'</span>,</span><br><span class=\"line\">          <span class=\"keyword\">lan</span><span class=\"variable\">g:</span> <span class=\"string\">'en'</span>,</span><br><span class=\"line\">          admin_emai<span class=\"variable\">l:</span> <span class=\"string\">'Your EMAIL'</span>,</span><br><span class=\"line\">          appId: <span class=\"string\">'Your APP ID'</span>,</span><br><span class=\"line\">          appKey: <span class=\"string\">'Your APP KEY'</span>,</span><br><span class=\"line\">          placeholder: <span class=\"string\">'Write a Comment'</span>,</span><br><span class=\"line\">          emoticon_ur<span class=\"variable\">l:</span><span class=\"string\">'https://cdn.jsdelivr.net/gh/fiteen/fiteen.github.io@0.1.0/alu'</span>,</span><br><span class=\"line\">          emoticon_lis<span class=\"variable\">t:</span>[<span class=\"string\">\"吐.png\"</span>,<span class=\"string\">\"喷血.png\"</span>,<span class=\"string\">\"狂汗.png\"</span>,<span class=\"string\">\"不说话.png\"</span>,<span class=\"string\">\"汗.png\"</span>,<span class=\"string\">\"坐等.png\"</span>,<span class=\"string\">\"献花.png\"</span>,<span class=\"string\">\"不高兴.png\"</span>,<span class=\"string\">\"中刀.png\"</span>,<span class=\"string\">\"害羞.png\"</span>,<span class=\"string\">\"皱眉.png\"</span>,<span class=\"string\">\"小眼睛.png\"</span>,<span class=\"string\">\"中指.png\"</span>,<span class=\"string\">\"尴尬.png\"</span>,<span class=\"string\">\"瞅你.png\"</span>,<span class=\"string\">\"想一想.png\"</span>,<span class=\"string\">\"中枪.png\"</span>,<span class=\"string\">\"得意.png\"</span>,<span class=\"string\">\"肿包.png\"</span>,<span class=\"string\">\"扇耳光.png\"</span>,<span class=\"string\">\"亲亲.png\"</span>,<span class=\"string\">\"惊喜.png\"</span>,<span class=\"string\">\"脸红.png\"</span>,<span class=\"string\">\"无所谓.png\"</span>,<span class=\"string\">\"便便.png\"</span>,<span class=\"string\">\"愤怒.png\"</span>,<span class=\"string\">\"蜡烛.png\"</span>,<span class=\"string\">\"献黄瓜.png\"</span>,<span class=\"string\">\"内伤.png\"</span>,<span class=\"string\">\"投降.png\"</span>,<span class=\"string\">\"观察.png\"</span>,<span class=\"string\">\"看不见.png\"</span>,<span class=\"string\">\"击掌.png\"</span>,<span class=\"string\">\"抠鼻.png\"</span>,<span class=\"string\">\"邪恶.png\"</span>,<span class=\"string\">\"看热闹.png\"</span>,<span class=\"string\">\"口水.png\"</span>,<span class=\"string\">\"抽烟.png\"</span>,<span class=\"string\">\"锁眉.png\"</span>,<span class=\"string\">\"装大款.png\"</span>,<span class=\"string\">\"吐舌.png\"</span>,<span class=\"string\">\"无奈.png\"</span>,<span class=\"string\">\"长草.png\"</span>,<span class=\"string\">\"赞一个.png\"</span>,<span class=\"string\">\"呲牙.png\"</span>,<span class=\"string\">\"无语.png\"</span>,<span class=\"string\">\"阴暗.png\"</span>,<span class=\"string\">\"不出所料.png\"</span>,<span class=\"string\">\"咽气.png\"</span>,<span class=\"string\">\"期待.png\"</span>,<span class=\"string\">\"高兴.png\"</span>,<span class=\"string\">\"吐血倒地.png\"</span>,<span class=\"string\">\"哭泣.png\"</span>,<span class=\"string\">\"欢呼.png\"</span>,<span class=\"string\">\"黑线.png\"</span>,<span class=\"string\">\"喜极而泣.png\"</span>,<span class=\"string\">\"喷水.png\"</span>,<span class=\"string\">\"深思.png\"</span>,<span class=\"string\">\"鼓掌.png\"</span>,<span class=\"string\">\"暗地观察.png\"</span>],</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p>关于上面的参数介绍：</p>\n<ul>\n<li><strong>lang</strong>：选填，目前支持英文版 <code>en</code> 和中文版 <code>zh-cn</code> 两种，默认是 <code>zh-cn</code>。</li>\n<li><strong>admin_email</strong>：选填，设置作者邮箱，使用该邮箱账号评论或回复，评论者名字右侧会出现一个人形小图标标识作者。</li>\n<li><strong>appId&amp;appKey</strong>：必填，LeanCloud 中创建应用得到的 <code>APP ID</code> 和 <code>APP KEY</code>，创建方式参照<a href=\"https://ioliu.cn/2017/add-valine-comments-to-your-blog/\" target=\"_blank\">此文</a>。</li>\n<li><strong>emoticon_url</strong>：必填，这里设置一个表情包 CDN 路径，你也可以自定义喜欢的表情包。</li>\n<li><strong>emoticon_list</strong>：必填，<code>emoticon_url</code>里包含的表情包中需要显示在评论区的表情包名称列表。</li>\n</ul>\n<p><img src=\"https://blog.fiteen.top/2020/hexo-theme-inside-plugin/valine-comment-example.png\" alt=\"评论区效果\" class=\"φcx\"></p>\n<p>这就是配置成功后的评论框效果。</p>\n<p>目前已经有 Valine 评论系统的拓展和增强版 <a href=\"https://github.com/DesertsP/Valine-Admin.git\" target=\"_blank\">Valine+Admin</a>，主要实现评论邮件通知、评论管理、垃圾评论过滤等功能，还支持自定义修改邮件通知模板、漏发邮件自动补发等。具体步骤这篇<a href=\"https://deserts.io/valine-admin-document/\" target=\"_blank\">配置手册</a>已经比较清晰了，照着上面的步骤操作即可，本文就不复制粘贴了。</p>\n<p><strong>注意</strong>：想要在评论区显示自定义头像，先前往<a href=\"http://cn.gravatar.com/\" target=\"_blank\">Gravatar 官网</a>注册账号，注册的邮箱需要和你评论时填写的邮箱一致。如果注册成功后，头像仍没有显示，不要着急， <code>gravatar.cat.net</code> 有七天的缓存期，请耐心等待。</p>\n<p>下面再分享几个<strong>小功能点的配置</strong>：</p>\n<h2 id=\"博客背景\">博客背景<a title=\"#博客背景\" href=\"#博客背景\"></a></h2>\n<p>修改博客背景很简单，只需修改 <code>themes/inside/_config.yml</code> 中 <code>appearance.background</code> 配置即可。</p>\n<p>这里分享一个网站——<a href=\"https://www.toptal.com/designers/subtlepatterns/\" target=\"_blank\">Subtle Patterns</a>，支持超过 500 种 PNG 高品质免费背景纹理素材，无须注册登录，可以直接下载。</p>\n<h2 id=\"博客字体\">博客字体<a title=\"#博客字体\" href=\"#博客字体\"></a></h2>\n<p>你可能会发现部署好的博客首次加载时的字体效果生效比较慢，这是因为主题中默认配置的字体样式用的是谷歌的服务：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_config<span class=\"selector-class\">.ymlappearance</span>:</span><br><span class=\"line\">  <span class=\"attribute\">font</span>:</span><br><span class=\"line\">    url: <span class=\"comment\">//fonts.googleapis.com/css?family=Baloo+Bhaijaan|Inconsolata|Josefin+Sans|Montserrat</span></span><br></pre></td></tr></table></figure>\n<p>如果被墙了就无法正常显示，因此我们可以换一个访问更快的地址，如：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_config<span class=\"selector-class\">.ymlappearance</span>:</span><br><span class=\"line\">  <span class=\"attribute\">font</span>:</span><br><span class=\"line\">    url: <span class=\"comment\">//cdn.jsdelivr.net/gh/fiteen/fiteen.github.io@v0.1.0/font.css</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"分享-qq-链接\">分享 QQ 链接<a title=\"#分享-qq-链接\" href=\"#分享-qq-链接\"></a></h2>\n<p>我们可以在 <code>sns.qq</code> 里配置自己想要链接的 QQ ID 信息，直接写 QQ 号当然是不可行的。需要先开通 <a href=\"https://shang.qq.com/v3/widget.html\" target=\"_blank\">QQ 推广</a>。</p>\n<p><img src=\"https://blog.fiteen.top/2020/hexo-theme-inside-plugin/qq-link.png\" alt=\"img\" class=\"φcx\"></p>\n<p><a> 标签里的 href 就是你的 QQ 号分享链接，形如：<a href=\"https://wpa.qq.com/msgrd?v=3&amp;uin=$%7BYOUR-QQ-ID%7D&amp;site=qq&amp;menu=yes%E3%80%82\" target=\"_blank\" rel=\"noopener\">https://wpa.qq.com/msgrd?v=3&amp;uin=${YOUR-QQ-ID}&amp;site=qq&amp;menu=yes。</a></p>\n<p>如果你要<strong>分享群号</strong>，通过<a href=\"https://qun.qq.com/join.html\" target=\"_blank\">加群组件</a>，拿到形如：<code>https://shang.qq.com/wpa/qunwpa?idkey=${YOUR-GROUP-ID-KEY}</code> 的链接。</p>\n<h2 id=\"配置-rss\">配置 RSS<a title=\"#配置-rss\" href=\"#配置-rss\"></a></h2>\n<p>比较简单，<a href=\"https://blog.oniuo.com/theme-inside/docs/basic#sns\" target=\"_blank\">文档</a>中有提到：</p>\n<blockquote>\n<p>若使用 hexo-generator-feed，sns.feed 可留空，主题会尝试取 hexo.config.feed.path。可通过改变项的先后顺序来自定义排序。</p>\n</blockquote>\n<p>因此直接在站点根目录（不是主题根目录）下执行命令即可：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm <span class=\"keyword\">install</span> hexo-generator-feed <span class=\"comment\">--save</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"q-&amp;-a\">Q &amp; A<a title=\"#q-&amp;-a\" href=\"#q-&amp;-a\"></a></h2>\n<p><strong>问题 1：为什么我按照文档设置了，加了插件设置后，不但没有生效，其它功能还出了问题或者工程都跑不起来了？</strong></p>\n<ol>\n<li>检查一下配置代码的空格，yml 文件对代码格式的要求比较严格。</li>\n<li>检查是否重复添加了 <code>plugins:</code>，添加多个插件也只需要声明一次。</li>\n</ol>\n<p><strong>问题 2：能否出一个小白教程？</strong></p>\n<p>可以在评论区描述你的问题，我会抽空整理到一起，补充在博客中。</p>\n<p><strong>问题 3：我希望博客可以支持某某功能，但是不知道该怎么做，能否帮忙实现一下？</strong></p>\n<p>可以提 <a href=\"https://github.com/fiteen/fiteen.github.io/issues\" target=\"_blank\">issue</a> 给我。</p>\n","next":{"title":"RetroArch上手教程","link":"posts/RetroArch上手教程"},"plink":"https://shuntan.github.io/posts/Hexo-inside个性化定制/","toc":[{"id":"plugin-前置准备","title":"plugin 前置准备","index":"1"},{"id":"font-awesome","title":"Font Awesome","index":"2"},{"id":"访问量统计","title":"访问量统计","index":"3"},{"id":"代码复制","title":"代码复制","index":"4"},{"id":"评论系统---valine","title":"评论系统 - Valine","index":"5"},{"id":"博客背景","title":"博客背景","index":"6"},{"id":"博客字体","title":"博客字体","index":"7"},{"id":"分享-qq-链接","title":"分享 QQ 链接","index":"8"},{"id":"配置-rss","title":"配置 RSS","index":"9"},{"id":"q-&amp;-a","title":"Q &amp; A","index":"10"}],"reward":true,"copyright":{"author":"Shawntan","link":"<a href=\"https://shuntan.github.io/posts/Hexo-inside个性化定制/\" title=\"Hexo + inside 博客个性化定制\">https://shuntan.github.io/posts/Hexo-inside个性化定制/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow noopener\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","published":"April 22, 2020","updated":"April 22, 2020"}}