{"title":"C++ä¸­çš„ä¸‡èƒ½å¼•ç”¨å’Œå®Œç¾è½¬å‘","date":"2019-05-29T02:05:19.000Z","thumbnail":null,"link":"post/å®Œç¾è½¬å‘","comments":true,"tags":["C++"],"categories":["C++"],"updated":"2019-07-14T01:22:44.423Z","content":"<h2 id=\"c-ä¸­çš„ä¸‡èƒ½å¼•ç”¨å’Œå®Œç¾è½¬å‘\">C++ä¸­çš„ä¸‡èƒ½å¼•ç”¨å’Œå®Œç¾è½¬å‘<a href=\"post/å®Œç¾è½¬å‘#c-ä¸­çš„ä¸‡èƒ½å¼•ç”¨å’Œå®Œç¾è½¬å‘\"></a></h2>\n<ul>\n<li>\n<p>é˜…è¯»è¿™ç¯‡åšæ–‡éœ€è¦äº†è§£C<ins>ä¸­çš„å·¦å€¼ï¼ˆlvalueï¼‰å’Œå³å€¼ï¼ˆrvalueï¼‰çš„æ¦‚å¿µï¼Œè¯¦æƒ…å‚è§æˆ‘çš„å¦å¤–ä¸€ç¯‡åšæ–‡ï¼šC</ins>ç§»åŠ¨è¯­ä¹‰åŠæ‹·è´ä¼˜åŒ–</p>\n</li>\n<li>\n<p>ä¸‡èƒ½å¼•ç”¨å’Œå®Œç¾è½¬å‘å¤šæ¶‰åŠåˆ°æ¨¡æ¿çš„ä½¿ç”¨ï¼Œå¦‚è‹¥ä¸æ˜¯è‡ªå·±å†™æ¨¡æ¿ï¼Œåˆ™å¯ä¸ç”¨å…³å¿ƒ</p>\n</li>\n</ul>\n<h3 id=\"ä¸‡èƒ½å¼•ç”¨-universal-reference\">ä¸‡èƒ½å¼•ç”¨ï¼ˆUniversal Referenceï¼‰<a href=\"post/å®Œç¾è½¬å‘#ä¸‡èƒ½å¼•ç”¨-universal-reference\"></a></h3>\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>\n<a id=\"more\"></a>\n<figure class=\"highlight cpp\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span>;</span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">template</span>&lt;<span class=\"keyword\">typename</span> T&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">func</span><span class=\"params\">(T&amp; param)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">cout</span> &lt;&lt; param &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> num = <span class=\"number\">2019</span>;</span><br><span class=\"line\">    func(num);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>è¿™æ ·ä¾‹å­çš„ç¼–è¯‘è¾“å‡ºéƒ½æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¿®æ”¹æˆä¸‹é¢çš„è°ƒç”¨æ–¹å¼å‘¢ï¼Ÿ</p>\n<figure class=\"highlight autoit\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span> main() &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(<span class=\"number\">2019</span>)</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span><span class=\"comment\">;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>åˆ™ä¼šå¾—åˆ°ä¸€ä¸ªå¤§å¤§çš„ç¼–è¯‘é”™è¯¯ã€‚å› ä¸ºä¸Šé¢çš„æ¨¡æ¿å‡½æ•°åªèƒ½æ¥å—å·¦å€¼æˆ–è€…å·¦å€¼å¼•ç”¨ï¼ˆå·¦å€¼ä¸€èˆ¬æ˜¯æœ‰åå­—çš„å˜é‡ï¼Œå¯ä»¥å–åˆ°åœ°å€çš„ï¼‰ï¼Œæˆ‘ä»¬å½“ç„¶å¯ä»¥é‡è½½ä¸€ä¸ªæ¥å—å³å€¼çš„æ¨¡æ¿å‡½æ•°ï¼Œå¦‚ä¸‹ä¹Ÿå¯ä»¥è¾¾åˆ°æ•ˆæœã€‚</p>\n<figure class=\"highlight cpp\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">template</span>&lt;<span class=\"keyword\">typename</span> T&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">func</span><span class=\"params\">(T&amp; param)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"ä¼ å…¥çš„æ˜¯å·¦å€¼\"</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">template</span>&lt;<span class=\"keyword\">typename</span> T&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">func</span><span class=\"params\">(T&amp;&amp; param)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"ä¼ å…¥çš„æ˜¯å³å€¼\"</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> num = <span class=\"number\">2019</span>;</span><br><span class=\"line\">    func(num);</span><br><span class=\"line\">    func(<span class=\"number\">2019</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>è¾“å‡ºç»“æœï¼š</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ä¼ å…¥çš„æ˜¯å·¦å€¼</span><br><span class=\"line\">ä¼ å…¥çš„æ˜¯å³å€¼</span><br></pre></td></tr></table></div></figure>\n<p>ç¬¬ä¸€æ¬¡å‡½æ•°è°ƒç”¨çš„æ˜¯å·¦å€¼å¾—ç‰ˆæœ¬ï¼Œç¬¬äºŒæ¬¡å‡½æ•°è°ƒç”¨çš„æ˜¯å³å€¼ç‰ˆæœ¬ã€‚ä½†æ˜¯ï¼Œæœ‰æ²¡æœ‰åŠæ³•åªå†™ä¸€ä¸ªæ¨¡æ¿å‡½æ•°å³å¯ä»¥æ¥æ”¶å·¦å€¼åˆå¯ä»¥æ¥æ”¶å³å€¼å‘¢ï¼Ÿ</p>\n<p>C++ 11ä¸­æœ‰ä¸‡èƒ½å¼•ç”¨ï¼ˆUniversal Referenceï¼‰çš„æ¦‚å¿µï¼šä½¿ç”¨T&amp;&amp;ç±»å‹çš„å½¢å‚æ—¢èƒ½ç»‘å®šå³å€¼ï¼Œåˆèƒ½ç»‘å®šå·¦å€¼ã€‚</p>\n<p>ä½†æ˜¯æ³¨æ„äº†ï¼š<strong>åªæœ‰å‘ç”Ÿç±»å‹æ¨å¯¼çš„æ—¶å€™ï¼ŒT&amp;&amp;æ‰è¡¨ç¤ºä¸‡èƒ½å¼•ç”¨ï¼›</strong> å¦åˆ™ï¼Œè¡¨ç¤ºå³å€¼å¼•ç”¨ã€‚</p>\n<p>æ‰€ä»¥ï¼Œä¸Šé¢çš„æ¡ˆä¾‹æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸ºï¼š</p>\n<figure class=\"highlight autoit\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">template&lt;typename T&gt;</span><br><span class=\"line\">void <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(T&amp;&amp; param)</span> &#123;</span></span><br><span class=\"line\">    cout &lt;&lt; param &lt;&lt; endl<span class=\"comment\">;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">int</span> main() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">int</span> num = <span class=\"number\">2019</span><span class=\"comment\">;</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(num)</span>;</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(<span class=\"number\">2019</span>)</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span><span class=\"comment\">;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<h2 id=\"å¼•ç”¨æŠ˜å -universal-collapse\">å¼•ç”¨æŠ˜å ï¼ˆUniversal Collapseï¼‰<a href=\"post/å®Œç¾è½¬å‘#å¼•ç”¨æŠ˜å -universal-collapse\"></a></h2>\n<p>ä¸‡èƒ½å¼•ç”¨è¯´å®Œäº†ï¼Œæ¥ç€æ¥èŠå¼•ç”¨æŠ˜å ï¼ˆUnivers Collapseï¼‰ï¼Œå› ä¸ºå®Œç¾è½¬å‘ï¼ˆPerfect Forwardingï¼‰çš„æ¦‚å¿µæ¶‰åŠå¼•ç”¨æŠ˜å ã€‚ä¸€ä¸ªæ¨¡æ¿å‡½æ•°ï¼Œæ ¹æ®å®šä¹‰çš„å½¢å‚å’Œä¼ å…¥çš„å®å‚çš„ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ä¸‹é¢å››ä¸­ç»„åˆï¼š</p>\n<ul>\n<li>å·¦å€¼-å·¦å€¼ T&amp; &amp;        # å‡½æ•°å®šä¹‰çš„å½¢å‚ç±»å‹æ˜¯å·¦å€¼å¼•ç”¨ï¼Œä¼ å…¥çš„å®å‚æ˜¯å·¦å€¼å¼•ç”¨</li>\n<li>å·¦å€¼-å³å€¼ T&amp; &amp;&amp;      # å‡½æ•°å®šä¹‰çš„å½¢å‚ç±»å‹æ˜¯å·¦å€¼å¼•ç”¨ï¼Œä¼ å…¥çš„å®å‚æ˜¯å³å€¼å¼•ç”¨</li>\n<li>å³å€¼-å·¦å€¼ T&amp;&amp; &amp;      # å‡½æ•°å®šä¹‰çš„å½¢å‚ç±»å‹æ˜¯å³å€¼å¼•ç”¨ï¼Œä¼ å…¥çš„å®å‚æ˜¯å·¦å€¼å¼•ç”¨</li>\n<li>å³å€¼-å³å€¼ T&amp;&amp; &amp;&amp;    # å‡½æ•°å®šä¹‰çš„å½¢å‚ç±»å‹æ˜¯å³å€¼å¼•ç”¨ï¼Œä¼ å…¥çš„å®å‚æ˜¯å³å€¼å¼•ç”¨</li>\n</ul>\n<p>ä½†æ˜¯C++ä¸­ä¸å…è®¸å¯¹å¼•ç”¨å†è¿›è¡Œå¼•ç”¨ï¼Œå¯¹äºä¸Šè¿°æƒ…å†µçš„å¤„ç†æœ‰å¦‚ä¸‹çš„è§„åˆ™ï¼š</p>\n<p>æ‰€æœ‰çš„æŠ˜å å¼•ç”¨æœ€ç»ˆéƒ½ä»£è¡¨ä¸€ä¸ªå¼•ç”¨ï¼Œè¦ä¹ˆæ˜¯å·¦å€¼å¼•ç”¨ï¼Œè¦ä¹ˆæ˜¯å³å€¼å¼•ç”¨ã€‚è§„åˆ™æ˜¯ï¼šå¦‚æœä»»ä¸€å¼•ç”¨ä¸ºå·¦å€¼å¼•ç”¨ï¼Œåˆ™ç»“æœä¸ºå·¦å€¼å¼•ç”¨ã€‚å¦åˆ™ï¼ˆå³ä¸¤ä¸ªéƒ½æ˜¯å³å€¼å¼•ç”¨ï¼‰ï¼Œç»“æœä¸ºå³å€¼å¼•ç”¨ã€‚</p>\n<p>å³å°±æ˜¯å‰é¢ä¸‰ç§æƒ…å†µä»£è¡¨çš„éƒ½æ˜¯å·¦å€¼å¼•ç”¨ï¼Œè€Œç¬¬å››ç§ä»£è¡¨çš„å³å€¼å¼•ç”¨ã€‚</p>\n<h2 id=\"å®Œç¾è½¬å‘-perfect-forwarding\">å®Œç¾è½¬å‘ï¼ˆPerfect Forwardingï¼‰<a href=\"post/å®Œç¾è½¬å‘#å®Œç¾è½¬å‘-perfect-forwarding\"></a></h2>\n<p>ä¸‹é¢æ¥ç€è¯´å®Œç¾è½¬å‘ï¼ˆPerfect Forwardingï¼‰ï¼Œé¦–å…ˆï¼Œçœ‹2ä¸ªä¾‹å­ï¼š</p>\n<p>ğŸŒ°æ —å­[1]<br>\nè¦äº†è§£å®Œç¾è½¬å‘ï¼Œå…ˆå¾—æ¸…æ¥šæ¨¡æ¿Tçš„<strong>æ¨å¯¼è¿‡ç¨‹</strong>ï¼Œ<span class=\"label success\">åœ¨æ²¡æœ‰åç‰¹åŒ–çš„æ¨¡ç‰ˆå‰æä¸‹ï¼Œæ¨¡æ¿æ€»æ˜¯æ ¹æ®æœ€åŒ¹é…çš„è§„åˆ™æ¥æ¨å¯¼å‚æ•°</span>ï¼Œå¯ä»¥æ ¹æ®ä¸‹é¢çš„ä¾‹å­æ¥çœ‹å‡ºæ¨å¯¼è¿‡ç¨‹ã€‚</p>\n<figure class=\"highlight cpp\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">template</span> &lt;<span class=\"keyword\">typename</span> T&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">func</span><span class=\"params\">(T&amp;&amp; arg)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">auto</span> is_lval = <span class=\"built_in\">std</span>::is_lvalue_reference&lt;T&gt;::value;</span><br><span class=\"line\">    <span class=\"keyword\">auto</span> is_rval  = <span class=\"built_in\">std</span>::is_rvalue_reference&lt;T&gt;::value;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"built_in\">std</span>::is_same&lt;T, <span class=\"keyword\">int</span>&gt;::value) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"'T' is type[int]\"</span> &lt;&lt; <span class=\"string\">\" ?is lvalue reference:\"</span> &lt;&lt; is_lval &lt;&lt;</span><br><span class=\"line\">                     <span class=\"string\">\" ?is rvalue reference:\"</span> &lt;&lt; is_rval &lt;&lt; <span class=\"string\">\" arg:\"</span> &lt;&lt; arg &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"built_in\">std</span>::is_same&lt;T, <span class=\"keyword\">int</span>&amp;&gt;::value) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"'T' is type[int&amp;]\"</span> &lt;&lt; <span class=\"string\">\" ?is lvalue reference:\"</span> &lt;&lt; is_lval &lt;&lt;</span><br><span class=\"line\">                     <span class=\"string\">\" ?is rvalue reference:\"</span> &lt;&lt; is_rval &lt;&lt; <span class=\"string\">\" arg:\"</span> &lt;&lt; arg &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"built_in\">std</span>::is_same&lt;T, <span class=\"keyword\">int</span>&amp;&amp;&gt;::value) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"'T' is type[int&amp;&amp;]\"</span> &lt;&lt; <span class=\"string\">\" ?is lvalue reference:\"</span> &lt;&lt; is_lval &lt;&lt;</span><br><span class=\"line\">                     <span class=\"string\">\" ?is rvalue reference:\"</span> &lt;&lt; is_rval &lt;&lt; <span class=\"string\">\" arg:\"</span> &lt;&lt; arg &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"-----------------\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">int</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  func(a);</span><br><span class=\"line\">  func(<span class=\"number\">2</span>);</span><br><span class=\"line\">  func(<span class=\"keyword\">static_cast</span>&lt;<span class=\"keyword\">int</span>&amp;&gt;(a));</span><br><span class=\"line\">  func(<span class=\"keyword\">static_cast</span>&lt;<span class=\"keyword\">int</span>&amp;&amp;&gt;(a));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>è¾“å‡ºç»“æœä¸ºï¼š</p>\n<figure class=\"highlight vim\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'T'</span> <span class=\"keyword\">is</span> <span class=\"built_in\">type</span>[<span class=\"keyword\">int</span>&amp;] ?<span class=\"keyword\">is</span> lvalue reference:<span class=\"number\">1</span> ?<span class=\"keyword\">is</span> rvalue reference:<span class=\"number\">0</span> <span class=\"keyword\">ar</span><span class=\"variable\">g:1</span></span><br><span class=\"line\">-----------------</span><br><span class=\"line\"><span class=\"string\">'T'</span> <span class=\"keyword\">is</span> <span class=\"built_in\">type</span>[<span class=\"keyword\">int</span>] ?<span class=\"keyword\">is</span> lvalue reference:<span class=\"number\">0</span> ?<span class=\"keyword\">is</span> rvalue reference:<span class=\"number\">0</span> <span class=\"keyword\">ar</span><span class=\"variable\">g:2</span></span><br><span class=\"line\">-----------------</span><br><span class=\"line\"><span class=\"string\">'T'</span> <span class=\"keyword\">is</span> <span class=\"built_in\">type</span>[<span class=\"keyword\">int</span>&amp;] ?<span class=\"keyword\">is</span> lvalue reference:<span class=\"number\">1</span> ?<span class=\"keyword\">is</span> rvalue reference:<span class=\"number\">0</span> <span class=\"keyword\">ar</span><span class=\"variable\">g:1</span></span><br><span class=\"line\">-----------------</span><br><span class=\"line\"><span class=\"string\">'T'</span> <span class=\"keyword\">is</span> <span class=\"built_in\">type</span>[<span class=\"keyword\">int</span>] ?<span class=\"keyword\">is</span> lvalue reference:<span class=\"number\">0</span> ?<span class=\"keyword\">is</span> rvalue reference:<span class=\"number\">0</span> <span class=\"keyword\">ar</span><span class=\"variable\">g:1</span></span><br><span class=\"line\">-----------------</span><br></pre></td></tr></table></div></figure>\n<p>å¯ä»¥å‘ç°ï¼Œå½“å®å‚æ•°æ˜¯ä»¥å€¼ä¼ é€’çš„æ–¹å¼æ¨å¯¼æ—¶ï¼Œå·¦å€¼ä¼ é€’Tä¸ºint&amp;ï¼Œå³å€¼ä¼ é€’Tä¸ºintã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿ</p>\n<p>å¦‚æœå°†æ¨¡ç‰ˆå‚æ•°æ˜¾ç¤ºç»‘å®šï¼š</p>\n<figure class=\"highlight cpp\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">int</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  func&lt;<span class=\"keyword\">int</span>&gt;(a); <span class=\"comment\">//é”™è¯¯âŒ</span></span><br><span class=\"line\">  func&lt;<span class=\"keyword\">int</span>&gt;(<span class=\"number\">2</span>);</span><br><span class=\"line\">  func&lt;<span class=\"keyword\">int</span>&amp;&gt;(<span class=\"keyword\">static_cast</span>&lt;<span class=\"keyword\">int</span>&amp;&gt;(a));</span><br><span class=\"line\">  func&lt;<span class=\"keyword\">int</span>&amp;&amp;&gt;(<span class=\"keyword\">static_cast</span>&lt;<span class=\"keyword\">int</span>&amp;&amp;&gt;(a));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>ä¼šå‘ç°æ— æ³•ç¼–è¯‘é€šè¿‡ï¼š</p>\n<figure class=\"highlight subunit\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In function 'int main()'</span><br><span class=\"line\"><span class=\"keyword\">error: </span>no matching for call to 'func(int&amp;)'</span><br><span class=\"line\">\tfunc&lt;int&gt;(a);</span><br><span class=\"line\">\t...</span><br></pre></td></tr></table></div></figure>\n<span class=\"label success\">æ ¹æ®C++ Primerä¸­æ–‡ç‰ˆ(ç¬¬äº”ç‰ˆ) 18ç« ç¬¬2èŠ‚æ¨¡æ¿å®å‚æ¨æ–­</span>\n<p><strong>Note:å¦‚æœä¸€ä¸ªå‡½æ•°å‚æ•°æ˜¯æŒ‡å‘æ¨¡ç‰ˆæ¿å‚æ•°ç±»å‹çš„å³å€¼å¼•ç”¨(å¦‚ï¼ŒT&amp;&amp;)ï¼Œåˆ™å¯ä»¥ä¼ é€’ç»™å®ƒä»»æ„ç±»å‹çš„å®å‚ã€‚å¦‚æœå°†ä¸€ä¸ªå·¦å€¼ä¼ é€’ç»™è¿™æ ·çš„å‚æ•°ï¼Œåˆ™å‡½æ•°å‚æ•°è¢«å®ä¾‹åŒ–ä¸ºä¸€ä¸ªæ™®é€šçš„å·¦å€¼å¼•ç”¨(T&amp;)ã€‚</strong>ï¼Œä¼°è®¡æ˜¯ç¼–è¯‘å™¨åšäº†ç‰¹æ®Šçš„å¤„ç†ã€‚</p>\n<p>ç”±äºintæ— æ³•åŒ¹é…T&amp;&amp;ï¼Œæ‰€ä»¥åªèƒ½æ ¹æ®<span class=\"label success\">å¼•ç”¨æŠ˜å ï¼ˆUniversal Collapseï¼‰</span>è§„åˆ™ï¼Œint&amp; &amp;&amp;=int&amp;ï¼Œint &amp;&amp;= int&amp;&amp;ã€‚ä¿ç•™äº†å‚æ•°çš„å·¦å€¼å³å€¼ç‰¹æ€§ã€‚<br>\nè¿™ä¹Ÿç¬¦åˆå¼•ç”¨æŠ˜å è§„åˆ™ã€‚</p>\n<p>å½“å®å‚æ•°ä»¥å·¦å€¼å¼•ç”¨å’Œå³å€¼å¼•ç”¨çš„æ–¹å¼æ¨å¯¼æ—¶ï¼Œint&amp;è¿˜æ˜¯æ— æ³•åŒ¹é…T&amp;&amp;ï¼Œæ‰€ä»¥T=int&amp;ï¼Œè€Œint&amp;&amp;åˆšå¥½åŒ¹é…T&amp;&amp;ï¼Œæ‰€ä»¥Tå°±æ˜¯intã€‚</p>\n<p>ğŸŒ°æ —å­[2]</p>\n<p>ä¸ºäº†æ–¹ä¾¿è§‚å¯Ÿè°ƒç”¨è¿‡ç¨‹ï¼Œæˆ‘ä»¬åœ¨std::forwardå‡½æ•°copyå‡ºæ¥ï¼Œå¢åŠ è¾“å‡ºä¸€æ¡å†…å®¹ï¼Œæ”¹ä¸ºtest::forwardï¼Œå…¶ä»–ä¿æŒä¸å˜ã€‚</p>\n<figure class=\"highlight cpp\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;bits/move.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// add print content</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> test&#123;</span><br><span class=\"line\"><span class=\"keyword\">template</span>&lt;<span class=\"keyword\">typename</span> _Tp&gt;</span><br><span class=\"line\">  <span class=\"keyword\">constexpr</span> _Tp&amp;&amp;</span><br><span class=\"line\">  forward(<span class=\"keyword\">typename</span> <span class=\"built_in\">std</span>::remove_reference&lt;_Tp&gt;::type&amp; <span class=\"keyword\">__t</span>) <span class=\"keyword\">noexcept</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Forward an l-value.\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">static_cast</span>&lt;_Tp&amp;&amp;&gt;(<span class=\"keyword\">__t</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">template</span>&lt;<span class=\"keyword\">typename</span> _Tp&gt;</span><br><span class=\"line\">  <span class=\"keyword\">constexpr</span> _Tp&amp;&amp;</span><br><span class=\"line\">  forward(<span class=\"keyword\">typename</span> <span class=\"built_in\">std</span>::remove_reference&lt;_Tp&gt;::type&amp;&amp; <span class=\"keyword\">__t</span>) <span class=\"keyword\">noexcept</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Forward an r-value.\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    <span class=\"keyword\">static_assert</span>(!<span class=\"built_in\">std</span>::is_lvalue_reference&lt;_Tp&gt;::value, <span class=\"string\">\"template argument\"</span></span><br><span class=\"line\">          <span class=\"string\">\" substituting _Tp is an lvalue reference type\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">static_cast</span>&lt;_Tp&amp;&amp;&gt;(<span class=\"keyword\">__t</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// my template functions</span></span><br><span class=\"line\"><span class=\"keyword\">template</span>&lt;<span class=\"keyword\">typename</span> T&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">func</span><span class=\"params\">(T&amp; param)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"ä¼ å…¥çš„æ˜¯å·¦å€¼\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">template</span>&lt;<span class=\"keyword\">typename</span> T&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">func</span><span class=\"params\">(T&amp;&amp; param)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"ä¼ å…¥çš„æ˜¯å³å€¼\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">template</span>&lt;<span class=\"keyword\">typename</span> T&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">warp</span><span class=\"params\">(T&amp;&amp; param)</span> </span>&#123;</span><br><span class=\"line\">    func(param);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"string\">\"C\"</span> &#123;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">int</span> argc, <span class=\"keyword\">char</span>* argv[])</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> num = <span class=\"number\">2019</span>;</span><br><span class=\"line\">    warp(num);</span><br><span class=\"line\">    warp(<span class=\"number\">2019</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;&#125;</span><br></pre></td></tr></table></div></figure>\n<p>è¾“å‡ºç»“æœä¸ºï¼š</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ä¼ å…¥çš„æ˜¯å·¦å€¼</span><br><span class=\"line\">ä¼ å…¥çš„æ˜¯å·¦å€¼</span><br></pre></td></tr></table></div></figure>\n<p>æ˜¯ä¸æ˜¯å’Œæˆ‘ä»¬é¢„æœŸçš„ä¸ä¸€æ ·ï¼Œä¸‹é¢æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹åŸå› ï¼š</p>\n<p><strong>warp()</strong>å‡½æ•°æœ¬èº«çš„å½¢å‚æ˜¯ä¸€ä¸ªä¸‡èƒ½å¼•ç”¨ï¼Œå³å¯ä»¥æ¥å—å·¦å€¼åˆå¯ä»¥æ¥å—å³å€¼ï¼›ç¬¬ä¸€ä¸ªwarp()å‡½æ•°è°ƒç”¨å®å‚æ˜¯å·¦å€¼ï¼Œæ‰€ä»¥ï¼Œ<strong>warp()</strong>å‡½æ•°ä¸­è°ƒç”¨<strong>func()</strong>ä¸­ä¼ å…¥çš„å‚æ•°ä¹Ÿåº”è¯¥æ˜¯å·¦å€¼ï¼›ç¬¬äºŒä¸ªwarp()å‡½æ•°è°ƒç”¨å®å‚æ˜¯å³å€¼ï¼Œæ ¹æ®ä¸Šé¢æ‰€è¯´çš„å¼•ç”¨æŠ˜å è§„åˆ™ï¼Œ<strong>warp()å‡½æ•°æ¥æ”¶çš„å‚æ•°ç±»å‹æ˜¯å³å€¼å¼•ç”¨ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå´è°ƒç”¨äº†è°ƒç”¨func()çš„å·¦å€¼ç‰ˆæœ¬äº†å‘¢ï¼Ÿ</strong>è¿™æ˜¯å› ä¸ºåœ¨warp()å‡½æ•°å†…éƒ¨ï¼Œå³å€¼å¼•ç”¨ç±»å‹å˜ä¸ºäº†å·¦å€¼ï¼Œå› ä¸ºå‚æ•°æœ‰äº†åç§°ï¼Œæˆ‘ä»¬ä¹Ÿé€šè¿‡å˜é‡åå–å¾—å˜é‡åœ°å€ã€‚</p>\n<p>ç»“è®ºï¼šæ— è®ºä¼ å…¥wrap()çš„å‚æ•°æ˜¯å·¦å€¼è¿˜æ˜¯å³å€¼ï¼Œåˆ°äº†å‡½æ•°å†…éƒ¨éƒ½å˜æˆäº†å·¦å€¼ã€‚</p>\n<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆä¿æŒå‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œå˜é‡ç±»å‹çš„ä¸å˜å‘¢ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬æ‰€è°“çš„â€œå®Œç¾è½¬å‘â€æŠ€æœ¯ï¼Œåœ¨C++11ä¸­é€šè¿‡std::forward()å‡½æ•°æ¥å®ç°ã€‚æˆ‘ä»¬ä¿®æ”¹æˆ‘ä»¬çš„warp()å‡½æ•°å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight swift\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">template&lt;typename <span class=\"type\">T</span>&gt;</span><br><span class=\"line\">void warp(<span class=\"type\">T</span>&amp;&amp; param) &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(test::forward&lt;T&gt;<span class=\"params\">(param)</span></span></span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>è¾“å‡ºç»“æœä¸ºï¼š</p>\n<figure class=\"highlight livecodeserver\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Forward <span class=\"keyword\">an</span> l-<span class=\"built_in\">value</span>.</span><br><span class=\"line\">ä¼ å…¥çš„æ˜¯å·¦å€¼</span><br><span class=\"line\">Forward <span class=\"keyword\">an</span> l-<span class=\"built_in\">value</span>.</span><br><span class=\"line\">ä¼ å…¥çš„æ˜¯å³å€¼</span><br></pre></td></tr></table></div></figure>\n<p>ç°åœ¨è·Ÿæˆ‘ä»¬çš„é¢„æœŸä¸€è‡´äº†ï¼Œä½†æ˜¯åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè§‚å¯Ÿforward()å‡½æ•°å†…éƒ¨ä¸éš¾å‘ç°ï¼Œä¼ å…¥çš„å‚æ•°åšäº†<strong>ç§»é™¤å¼•ç”¨</strong>çš„æ“ä½œï¼Œä½¿å…¶éƒ½ä¸º&amp;&amp; æˆ– &amp;ï¼Œæ‰€ä»¥æœ‰2ä¸ªå‡½æ•°ç‰ˆæœ¬ï¼Œé‡ç‚¹åœ¨äºæ¨¡ç‰ˆè¿”å›çš„æ—¶å€™<strong>return static_cast&lt;_Tp&amp;&amp;&gt;(__t);</strong>å¼ºåˆ¶å°†å®å‚è½¬æ¢æˆTåŸæœ‰çš„å¼•ç”¨ç±»å‹ï¼Œæ ¹æ®<strong>å¼•ç”¨æŠ˜å </strong>åŸåˆ™ï¼ŒT&amp;&amp; &amp;è¿˜æ˜¯&amp;ï¼ŒT&amp;&amp; &amp;&amp;è¿˜æ˜¯&amp;&amp;ã€‚æ‰€ä»¥å®ç°äº†â€œå®Œç¾è½¬å‘â€ã€‚</p>\n<p>å¦‚æœå°†wrap()å‡½æ•°æ”¹ä¸ºè¿™æ ·å‘¢ï¼Ÿ</p>\n<figure class=\"highlight swift\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">template&lt;typename <span class=\"type\">T</span>&gt;</span><br><span class=\"line\">void warp(<span class=\"type\">T</span>&amp;&amp; param) &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(test::forward&lt;T&gt;<span class=\"params\">(std::move<span class=\"params\">(param)</span></span></span></span>));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>ç¼–è¯‘ç»“æœï¼š</p>\n<figure class=\"highlight vim\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Errorï¼š</span><br><span class=\"line\">static_assert(template <span class=\"keyword\">argument</span> substituting _Tp <span class=\"keyword\">is</span> <span class=\"keyword\">an</span> lvalue reference <span class=\"built_in\">type</span><span class=\"comment\">\");</span></span><br></pre></td></tr></table></div></figure>\n<p>å¯ä»¥å‘ç°æˆåŠŸèµ°åˆ°äº†ç¬¬äºŒä¸ªforward()å‡½æ•°ç‰ˆæœ¬ã€‚å°†<strong>static_assert&lt;&gt;</strong>æ³¨é‡Šæ‰ï¼Œç¼–è¯‘é€šè¿‡ã€‚è¾“å‡ºç»“æœä¸ºï¼š</p>\n<figure class=\"highlight livecodeserver\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Forward <span class=\"keyword\">an</span> r-<span class=\"built_in\">value</span>.</span><br><span class=\"line\">ä¼ å…¥çš„æ˜¯å·¦å€¼</span><br><span class=\"line\">Forward <span class=\"keyword\">an</span> r-<span class=\"built_in\">value</span>.</span><br><span class=\"line\">ä¼ å…¥çš„æ˜¯å³å€¼</span><br></pre></td></tr></table></div></figure>\n<p>å¯¹æ¯”std::move()çš„è¿”å›å€¼å°±å¯ä»¥å‘ç°ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯<strong>return static_cast&lt;typename  std::remove_reference&lt;_Tp&gt;::type&amp;&amp;&gt;(__t);</strong>ä¸éš¾çœ‹å‡ºï¼Œå¿…æ˜¯å³å€¼å¼•ç”¨ã€‚è€Œstd::forward()å‡½æ•°åˆ™å°†å…¶æŒ‰Tçš„å¼•ç”¨ç±»å‹ä¿æŒä¸å˜åŸæ ·è¿”å›ã€‚</p>\n","prev":{"title":"C++ æ¨¡æ¿åç‰¹åŒ–ï¼æ¥è‡ªSTLçš„æ€è€ƒ","link":"post/æ¨¡æ¿ç‰¹åŒ–"},"next":{"title":"ä»4è¡Œä»£ç çœ‹å³å€¼å¼•ç”¨","link":"post/å³å€¼å¼•ç”¨"},"plink":"https://shuntan.github.io/post/å®Œç¾è½¬å‘/","toc":[{"title":"C++ä¸­çš„ä¸‡èƒ½å¼•ç”¨å’Œå®Œç¾è½¬å‘","id":"c-ä¸­çš„ä¸‡èƒ½å¼•ç”¨å’Œå®Œç¾è½¬å‘","index":"1","children":[{"title":"ä¸‡èƒ½å¼•ç”¨ï¼ˆUniversal Referenceï¼‰","id":"ä¸‡èƒ½å¼•ç”¨-universal-reference","index":"1.1"}]},{"title":"å¼•ç”¨æŠ˜å ï¼ˆUniversal Collapseï¼‰","id":"å¼•ç”¨æŠ˜å -universal-collapse","index":"2"},{"title":"å®Œç¾è½¬å‘ï¼ˆPerfect Forwardingï¼‰","id":"å®Œç¾è½¬å‘-perfect-forwarding","index":"3"}],"reward":true,"copyright":{"author":"Shawntan","link":"<a href=\"https://shuntan.github.io/post/å®Œç¾è½¬å‘/\" title=\"C++ä¸­çš„ä¸‡èƒ½å¼•ç”¨å’Œå®Œç¾è½¬å‘\">https://shuntan.github.io/post/å®Œç¾è½¬å‘/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow noopener\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","published":"May 29, 2019","updated":"July 14, 2019"}}